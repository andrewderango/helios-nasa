{
 "cells": [
  {
   "cell_type": "code",
   "execution_count": 1,
   "metadata": {},
   "outputs": [],
   "source": [
    "import requests\n",
    "from dotenv import load_dotenv\n",
    "import os\n",
    "import requests as r"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 2,
   "metadata": {},
   "outputs": [],
   "source": [
    "load_dotenv()\n",
    "api = 'https://appeears.earthdatacloud.nasa.gov/api/'\n",
    "user = os.getenv('NASA_USERNAME')\n",
    "password = os.getenv('NASA_PASSWORD')\n",
    "token_response = r.post(f'{api}login', auth=(user, password)).json()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 5,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "{'message': '[] is too short'}\n"
     ]
    },
    {
     "ename": "KeyError",
     "evalue": "'task_id'",
     "output_type": "error",
     "traceback": [
      "\u001b[0;31m---------------------------------------------------------------------------\u001b[0m",
      "\u001b[0;31mKeyError\u001b[0m                                  Traceback (most recent call last)",
      "Cell \u001b[0;32mIn[5], line 83\u001b[0m\n\u001b[1;32m     81\u001b[0m task_response \u001b[38;5;241m=\u001b[39m response\u001b[38;5;241m.\u001b[39mjson()\n\u001b[1;32m     82\u001b[0m \u001b[38;5;28mprint\u001b[39m(task_response)\n\u001b[0;32m---> 83\u001b[0m task_id \u001b[38;5;241m=\u001b[39m \u001b[43mtask_response\u001b[49m\u001b[43m[\u001b[49m\u001b[38;5;124;43m'\u001b[39;49m\u001b[38;5;124;43mtask_id\u001b[39;49m\u001b[38;5;124;43m'\u001b[39;49m\u001b[43m]\u001b[49m\n\u001b[1;32m     84\u001b[0m \u001b[38;5;28mprint\u001b[39m(task_response)\n",
      "\u001b[0;31mKeyError\u001b[0m: 'task_id'"
     ]
    }
   ],
   "source": [
    "# create the task request\n",
    "task = {\n",
    "    'task_type': 'point',\n",
    "    'task_name': 'Landsat 8 and 9 SR Bands 1-7',\n",
    "    'params': {\n",
    "        \"dates\": [\n",
    "            {\n",
    "                \"endDate\": \"01-31-2022\",\n",
    "                \"startDate\": \"01-01-2020\"\n",
    "            }\n",
    "        ],\n",
    "        \"layers\": [\n",
    "            {\n",
    "                \"layer\": \"SR_B1\",\n",
    "                \"product\": \"L09.002\"\n",
    "            },\n",
    "            {\n",
    "                \"layer\": \"SR_B2\",\n",
    "                \"product\": \"L09.002\"\n",
    "            },\n",
    "            {\n",
    "                \"layer\": \"SR_B3\",\n",
    "                \"product\": \"L09.002\"\n",
    "            },\n",
    "            {\n",
    "                \"layer\": \"SR_B4\",\n",
    "                \"product\": \"L09.002\"\n",
    "            },      \n",
    "            {\n",
    "                \"layer\": \"SR_B5\",\n",
    "                \"product\": \"L09.002\"\n",
    "            },\n",
    "            {\n",
    "                \"layer\": \"SR_B6\",\n",
    "                \"product\": \"L09.002\"\n",
    "            },\n",
    "            {\n",
    "                \"layer\": \"SR_B7\",\n",
    "                \"product\": \"L09.002\"\n",
    "            },\n",
    "            {\n",
    "                \"layer\": \"SR_B1\",\n",
    "                \"product\": \"L08.002\"\n",
    "            },\n",
    "            {\n",
    "                \"layer\": \"SR_B2\",\n",
    "                \"product\": \"L08.002\"\n",
    "            },\n",
    "            {\n",
    "                \"layer\": \"SR_B3\",\n",
    "                \"product\": \"L08.002\"\n",
    "            },\n",
    "            {\n",
    "                \"layer\": \"SR_B4\",\n",
    "                \"product\": \"L08.002\"\n",
    "            },      \n",
    "            {\n",
    "                \"layer\": \"SR_B5\",\n",
    "                \"product\": \"L08.002\"\n",
    "            },\n",
    "            {\n",
    "                \"layer\": \"SR_B6\",\n",
    "                \"product\": \"L08.002\"\n",
    "            },\n",
    "            {\n",
    "                \"layer\": \"SR_B7\",\n",
    "                \"product\": \"L08.002\"\n",
    "            }\n",
    "        ],\n",
    "        \"coordinates\": [\n",
    "            {\n",
    "                \"latitude\": 43.58045658045632,\n",
    "                \"longitude\": -79.65329465329421\n",
    "            }\n",
    "        ]\n",
    "    }\n",
    "}\n",
    "\n",
    "# submit the task request\n",
    "token = token_response['token']\n",
    "response = requests.post(\n",
    "    'https://appeears.earthdatacloud.nasa.gov/api/task', \n",
    "    json=task, \n",
    "    headers={'Authorization': 'Bearer {0}'.format(token)})\n",
    "task_response = response.json()\n",
    "print(task_response)\n",
    "task_id = task_response['task_id']\n",
    "print(task_response)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 17,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "{'tier': 2,\n",
       " 'error': None,\n",
       " 'params': {'dates': [{'endDate': '01-31-2022', 'startDate': '01-01-2020'}],\n",
       "  'layers': [{'layer': 'SR_B1', 'product': 'L09.002'},\n",
       "   {'layer': 'SR_B2', 'product': 'L09.002'},\n",
       "   {'layer': 'SR_B3', 'product': 'L09.002'},\n",
       "   {'layer': 'SR_B4', 'product': 'L09.002'},\n",
       "   {'layer': 'SR_B5', 'product': 'L09.002'},\n",
       "   {'layer': 'SR_B6', 'product': 'L09.002'},\n",
       "   {'layer': 'SR_B7', 'product': 'L09.002'},\n",
       "   {'layer': 'SR_B1', 'product': 'L08.002'},\n",
       "   {'layer': 'SR_B2', 'product': 'L08.002'},\n",
       "   {'layer': 'SR_B3', 'product': 'L08.002'},\n",
       "   {'layer': 'SR_B4', 'product': 'L08.002'},\n",
       "   {'layer': 'SR_B5', 'product': 'L08.002'},\n",
       "   {'layer': 'SR_B6', 'product': 'L08.002'},\n",
       "   {'layer': 'SR_B7', 'product': 'L08.002'}],\n",
       "  'coordinates': [{'latitude': 43.58045658045632,\n",
       "    'longitude': -79.65329465329421}]},\n",
       " 'status': 'queued',\n",
       " 'created': '2024-10-06T16:14:51.575294',\n",
       " 'task_id': '5ee9917c-3b3d-4458-ba87-01fa7bc61392',\n",
       " 'updated': '2024-10-06T16:14:51.904572',\n",
       " 'user_id': 'heliosspaceapp@gmail.com',\n",
       " 'estimate': {'request_size': 52, 'request_memory': 1},\n",
       " 'retry_at': None,\n",
       " 'has_swath': False,\n",
       " 'task_name': 'Landsat 8 and 9 SR Bands 1-7',\n",
       " 'task_type': 'point',\n",
       " 'api_version': 'v1',\n",
       " 'svc_version': '3.63',\n",
       " 'web_version': None,\n",
       " 'has_nsidc_daac': False,\n",
       " 'expires_on': '2024-11-05T16:14:51.904572'}"
      ]
     },
     "execution_count": 17,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "response = requests.get(\n",
    "    'https://appeears.earthdatacloud.nasa.gov/api/task/{0}'.format(task_id), \n",
    "    headers={'Authorization': 'Bearer {0}'.format(token)}\n",
    ")\n",
    "task_response = response.json()\n",
    "task_response"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 5,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "<!doctype html>\n",
      "<html lang=\"en\" data-critters-container>\n",
      "  <head>\n",
      "    <!-- Google Tag Manager -->\n",
      "    <script>var dataLayer=window.dataLayer=window.dataLayer||[];\n",
      "    (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':\n",
      "    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],\n",
      "    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=\n",
      "    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);\n",
      "    })(window,document,'script','dataLayer','GTM-WNP7MLF');</script>\n",
      "    <!-- End Google Tag Manager -->\n",
      "     <!-- Earth Data Status App -->\n",
      "    <script src=\"https://status.earthdata.nasa.gov/assets/banner_widget.js\"></script>\n",
      "    <!-- End  Earth Data Status App -->\n",
      "\n",
      "    <title>A&rho;&rho;EEARS</title>\n",
      "    <base href=\"/\">\n",
      "\n",
      "    <meta charset=\"utf-8\">\n",
      "    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n",
      "    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n",
      "    <meta http-equiv=\"Cache-control\" content=\"no-cache, no-store, must-revalidate\">\n",
      "    <meta http-equiv=\"Pragma\" content=\"no-cache\">\n",
      "    <link rel=\"icon\" type=\"image/x-icon\" href=\"favicon.ico\">\n",
      "\n",
      "    <link rel=\"manifest\" href=\"manifest.json\">\n",
      "    <meta name=\"theme-color\" content=\"#2276ac\">\n",
      "\n",
      "    <meta name=\"title\" content=\"AppEEARS\">\n",
      "    <meta name=\"robots\" content=\"NOODP\">\n",
      "    <meta name=\"description\" content=\"The Application for Extracting and Exploring Analysis Ready Samples (AρρEEARS) offers a simple and efficient way to access and transform geospatial data from a variety of federal data archives\">\n",
      "    <meta name=\"author\" content=\"USGS - U.S. Geological Survey, LP DAAC - Land Processes Distributed Active Archive Center\">\n",
      "    <meta name=\"creation date\" content=\"20150501\">\n",
      "    <meta name=\"reviewed date\" content=\"20150501\">\n",
      "    <meta name=\"expiration date\" content=\"Never\">\n",
      "    <meta name=\"language\" content=\"EN\">\n",
      "\n",
      "    <link rel=\"apple-touch-icon\" href=\"apple-touch-icon.png\">\n",
      "\n",
      "    <!--GSA DAP tracking -->\n",
      "    <script async type=\"text/javascript\" src=\"https://dap.digitalgov.gov/Universal-Federated-Analytics-Min.js?agency=NASA&amp;subagency=GSFC\" id=\"_fed_an_ua_tag\"></script>\n",
      "  <style>@import\"https://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700\";@charset \"UTF-8\";:root{--blue:#446E9B;--indigo:#6610f2;--purple:#6f42c1;--pink:#e83e8c;--red:#CD0200;--orange:#fd7e14;--yellow:#D47500;--green:#189c54;--teal:#20c997;--cyan:#3399F3;--white:#fff;--gray:#777;--gray-dark:#333;--primary:#446E9B;--secondary:#999;--success:#189c54;--info:#3399F3;--warning:#D47500;--danger:#CD0200;--light:#999;--dark:#333;--breakpoint-xs:0;--breakpoint-sm:576px;--breakpoint-md:768px;--breakpoint-lg:992px;--breakpoint-xl:1200px;--font-family-sans-serif:\"Helvetica Neue\", Helvetica, Arial, sans-serif;--font-family-monospace:Menlo, Monaco, Consolas, \"Courier New\", monospace}*,*:before,*:after{box-sizing:border-box}html{font-family:sans-serif;line-height:1.15;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:rgba(0,0,0,0)}body{margin:0;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-size:.875rem;font-weight:400;line-height:1.428571429;color:#2d2d2d;text-align:left;background-color:#fff}@media print{*,*:before,*:after{text-shadow:none!important;box-shadow:none!important}@page{size:a3}body{min-width:992px!important}}html,body{min-height:100%}html{margin-top:25px}body{background-color:#ebebeb}:root{--surface-a:#ffffff;--surface-b:#efefef;--surface-c:#e9ecef;--surface-d:#dee2e6;--surface-e:#ffffff;--surface-f:#ffffff;--text-color:#212529;--text-color-secondary:#6c757d;--primary-color:#007bff;--primary-color-text:#ffffff;--font-family:-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol;--surface-0:#ffffff;--surface-50:#f9fafb;--surface-100:#f8f9fa;--surface-200:#e9ecef;--surface-300:#dee2e6;--surface-400:#ced4da;--surface-500:#adb5bd;--surface-600:#6c757d;--surface-700:#495057;--surface-800:#343a40;--surface-900:#212529;--gray-50:#f9fafb;--gray-100:#f8f9fa;--gray-200:#e9ecef;--gray-300:#dee2e6;--gray-400:#ced4da;--gray-500:#adb5bd;--gray-600:#6c757d;--gray-700:#495057;--gray-800:#343a40;--gray-900:#212529;--content-padding:1.25rem;--inline-spacing:.5rem;--border-radius:4px;--surface-ground:#efefef;--surface-section:#ffffff;--surface-card:#ffffff;--surface-overlay:#ffffff;--surface-border:#dee2e6;--surface-hover:#e9ecef;--maskbg:rgba(0, 0, 0, .4);--highlight-bg:#007bff;--highlight-text-color:#ffffff;--focus-ring:0 0 0 .2rem rgba(38, 143, 255, .5);color-scheme:light}*{box-sizing:border-box}:root{--blue-50:#f3f8ff;--blue-100:#c5dcff;--blue-200:#97c1fe;--blue-300:#69a5fe;--blue-400:#3b8afd;--blue-500:#0d6efd;--blue-600:#0b5ed7;--blue-700:#094db1;--blue-800:#073d8b;--blue-900:#052c65;--green-50:#f4f9f6;--green-100:#c8e2d6;--green-200:#9ccbb5;--green-300:#70b595;--green-400:#459e74;--green-500:#198754;--green-600:#157347;--green-700:#125f3b;--green-800:#0e4a2e;--green-900:#0a3622;--yellow-50:#fffcf3;--yellow-100:#fff0c3;--yellow-200:#ffe494;--yellow-300:#ffd965;--yellow-400:#ffcd36;--yellow-500:#ffc107;--yellow-600:#d9a406;--yellow-700:#b38705;--yellow-800:#8c6a04;--yellow-900:#664d03;--cyan-50:#f3fcfe;--cyan-100:#c5f2fb;--cyan-200:#97e8f9;--cyan-300:#69def6;--cyan-400:#3bd4f3;--cyan-500:#0dcaf0;--cyan-600:#0baccc;--cyan-700:#098da8;--cyan-800:#076f84;--cyan-900:#055160;--pink-50:#fdf5f9;--pink-100:#f5cee1;--pink-200:#eda7ca;--pink-300:#e681b3;--pink-400:#de5a9b;--pink-500:#d63384;--pink-600:#b62b70;--pink-700:#96245c;--pink-800:#761c49;--pink-900:#561435;--indigo-50:#f7f3fe;--indigo-100:#dac6fc;--indigo-200:#bd98f9;--indigo-300:#a06bf7;--indigo-400:#833df4;--indigo-500:#6610f2;--indigo-600:#570ece;--indigo-700:#470ba9;--indigo-800:#380985;--indigo-900:#290661;--teal-50:#f4fcfa;--teal-100:#c9f2e6;--teal-200:#9fe8d2;--teal-300:#75debf;--teal-400:#4ad3ab;--teal-500:#20c997;--teal-600:#1bab80;--teal-700:#168d6a;--teal-800:#126f53;--teal-900:#0d503c;--orange-50:#fff9f3;--orange-100:#ffe0c7;--orange-200:#fec89a;--orange-300:#feaf6d;--orange-400:#fd9741;--orange-500:#fd7e14;--orange-600:#d76b11;--orange-700:#b1580e;--orange-800:#8b450b;--orange-900:#653208;--bluegray-50:#f8f9fb;--bluegray-100:#e0e4ea;--bluegray-200:#c7ced9;--bluegray-300:#aeb9c8;--bluegray-400:#95a3b8;--bluegray-500:#7c8ea7;--bluegray-600:#69798e;--bluegray-700:#576375;--bluegray-800:#444e5c;--bluegray-900:#323943;--purple-50:#f8f6fc;--purple-100:#dcd2f0;--purple-200:#c1aee4;--purple-300:#a68ad9;--purple-400:#8a66cd;--purple-500:#6f42c1;--purple-600:#5e38a4;--purple-700:#4e2e87;--purple-800:#3d246a;--purple-900:#2c1a4d;--red-50:#fdf5f6;--red-100:#f7cfd2;--red-200:#f0a8af;--red-300:#e9828c;--red-400:#e35b68;--red-500:#dc3545;--red-600:#bb2d3b;--red-700:#9a2530;--red-800:#791d26;--red-900:#58151c;--primary-50:#f2f8ff;--primary-100:#c2dfff;--primary-200:#91c6ff;--primary-300:#61adff;--primary-400:#3094ff;--primary-500:#007bff;--primary-600:#0069d9;--primary-700:#0056b3;--primary-800:#00448c;--primary-900:#003166}</style><link rel=\"stylesheet\" href=\"styles.305394b8e80b506d.css\" media=\"print\" onload=\"this.media='all'\"><noscript><link rel=\"stylesheet\" href=\"styles.305394b8e80b506d.css\"></noscript></head>\n",
      "  <body id=\"top\">\n",
      "    <!-- Google Tag Manager (noscript) -->\n",
      "    <noscript>\n",
      "      <iframe src=\"https://www.googletagmanager.com/ns.html?id=GTM-WNP7MLF\" height=\"0\" width=\"0\" style=\"display:none;visibility:hidden\"></iframe>\n",
      "    </noscript>\n",
      "    <!-- End Google Tag Manager (noscript) -->\n",
      "    \n",
      "    <!-- App root route -->\n",
      "    <app-root></app-root>\n",
      "\n",
      "    <script>window.appDebug=true;</script>\n",
      "  \n",
      "    <!-- load external scripts -->\n",
      "    <script async=\"async\" defer=\"defer\" src=\"https://cdn.earthdata.nasa.gov/tophat2/tophat2.js\" id=\"earthdata-tophat-script\" data-current-daac=\"LP DAAC\"></script>\n",
      "  <script src=\"runtime.fb26fae061cf48f7.js\" type=\"module\"></script><script src=\"polyfills.19306772240d9b2b.js\" type=\"module\"></script><script src=\"scripts.210315fab5274d52.js\" defer></script><script src=\"main.7e1737435c1ca948.js\" type=\"module\"></script></body>\n",
      "</html>\n"
     ]
    }
   ],
   "source": [
    "# download the data\n",
    "response = requests.get(\n",
    "    f'https://appeears.earthdatacloud.nasa.gov/explore/{task_id}',\n",
    "    headers={'Authorization': 'Bearer {0}'.format(token)}\n",
    ")\n",
    "print(response.content.decode('utf-8'))\n",
    "\n",
    "# with open('data.zip', 'wb') as f:\n",
    "#     f.write(response.content)\n",
    "\n",
    "# # unzip the data\n",
    "# import zipfile\n",
    "# with zipfile.ZipFile('data.zip', 'r') as zip_ref:\n",
    "#     zip_ref.extractall('data')\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 14,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "<!doctype html>\n",
      "<html lang=\"en\" data-critters-container>\n",
      "  <head>\n",
      "    <!-- Google Tag Manager -->\n",
      "    <script>var dataLayer=window.dataLayer=window.dataLayer||[];\n",
      "    (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':\n",
      "    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],\n",
      "    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=\n",
      "    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);\n",
      "    })(window,document,'script','dataLayer','GTM-WNP7MLF');</script>\n",
      "    <!-- End Google Tag Manager -->\n",
      "     <!-- Earth Data Status App -->\n",
      "    <script src=\"https://status.earthdata.nasa.gov/assets/banner_widget.js\"></script>\n",
      "    <!-- End  Earth Data Status App -->\n",
      "\n",
      "    <title>A&rho;&rho;EEARS</title>\n",
      "    <base href=\"/\">\n",
      "\n",
      "    <meta charset=\"utf-8\">\n",
      "    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n",
      "    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n",
      "    <meta http-equiv=\"Cache-control\" content=\"no-cache, no-store, must-revalidate\">\n",
      "    <meta http-equiv=\"Pragma\" content=\"no-cache\">\n",
      "    <link rel=\"icon\" type=\"image/x-icon\" href=\"favicon.ico\">\n",
      "\n",
      "    <link rel=\"manifest\" href=\"manifest.json\">\n",
      "    <meta name=\"theme-color\" content=\"#2276ac\">\n",
      "\n",
      "    <meta name=\"title\" content=\"AppEEARS\">\n",
      "    <meta name=\"robots\" content=\"NOODP\">\n",
      "    <meta name=\"description\" content=\"The Application for Extracting and Exploring Analysis Ready Samples (AρρEEARS) offers a simple and efficient way to access and transform geospatial data from a variety of federal data archives\">\n",
      "    <meta name=\"author\" content=\"USGS - U.S. Geological Survey, LP DAAC - Land Processes Distributed Active Archive Center\">\n",
      "    <meta name=\"creation date\" content=\"20150501\">\n",
      "    <meta name=\"reviewed date\" content=\"20150501\">\n",
      "    <meta name=\"expiration date\" content=\"Never\">\n",
      "    <meta name=\"language\" content=\"EN\">\n",
      "\n",
      "    <link rel=\"apple-touch-icon\" href=\"apple-touch-icon.png\">\n",
      "\n",
      "    <!--GSA DAP tracking -->\n",
      "    <script async type=\"text/javascript\" src=\"https://dap.digitalgov.gov/Universal-Federated-Analytics-Min.js?agency=NASA&amp;subagency=GSFC\" id=\"_fed_an_ua_tag\"></script>\n",
      "  <style>@import\"https://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700\";@charset \"UTF-8\";:root{--blue:#446E9B;--indigo:#6610f2;--purple:#6f42c1;--pink:#e83e8c;--red:#CD0200;--orange:#fd7e14;--yellow:#D47500;--green:#189c54;--teal:#20c997;--cyan:#3399F3;--white:#fff;--gray:#777;--gray-dark:#333;--primary:#446E9B;--secondary:#999;--success:#189c54;--info:#3399F3;--warning:#D47500;--danger:#CD0200;--light:#999;--dark:#333;--breakpoint-xs:0;--breakpoint-sm:576px;--breakpoint-md:768px;--breakpoint-lg:992px;--breakpoint-xl:1200px;--font-family-sans-serif:\"Helvetica Neue\", Helvetica, Arial, sans-serif;--font-family-monospace:Menlo, Monaco, Consolas, \"Courier New\", monospace}*,*:before,*:after{box-sizing:border-box}html{font-family:sans-serif;line-height:1.15;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:rgba(0,0,0,0)}body{margin:0;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-size:.875rem;font-weight:400;line-height:1.428571429;color:#2d2d2d;text-align:left;background-color:#fff}@media print{*,*:before,*:after{text-shadow:none!important;box-shadow:none!important}@page{size:a3}body{min-width:992px!important}}html,body{min-height:100%}html{margin-top:25px}body{background-color:#ebebeb}:root{--surface-a:#ffffff;--surface-b:#efefef;--surface-c:#e9ecef;--surface-d:#dee2e6;--surface-e:#ffffff;--surface-f:#ffffff;--text-color:#212529;--text-color-secondary:#6c757d;--primary-color:#007bff;--primary-color-text:#ffffff;--font-family:-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol;--surface-0:#ffffff;--surface-50:#f9fafb;--surface-100:#f8f9fa;--surface-200:#e9ecef;--surface-300:#dee2e6;--surface-400:#ced4da;--surface-500:#adb5bd;--surface-600:#6c757d;--surface-700:#495057;--surface-800:#343a40;--surface-900:#212529;--gray-50:#f9fafb;--gray-100:#f8f9fa;--gray-200:#e9ecef;--gray-300:#dee2e6;--gray-400:#ced4da;--gray-500:#adb5bd;--gray-600:#6c757d;--gray-700:#495057;--gray-800:#343a40;--gray-900:#212529;--content-padding:1.25rem;--inline-spacing:.5rem;--border-radius:4px;--surface-ground:#efefef;--surface-section:#ffffff;--surface-card:#ffffff;--surface-overlay:#ffffff;--surface-border:#dee2e6;--surface-hover:#e9ecef;--maskbg:rgba(0, 0, 0, .4);--highlight-bg:#007bff;--highlight-text-color:#ffffff;--focus-ring:0 0 0 .2rem rgba(38, 143, 255, .5);color-scheme:light}*{box-sizing:border-box}:root{--blue-50:#f3f8ff;--blue-100:#c5dcff;--blue-200:#97c1fe;--blue-300:#69a5fe;--blue-400:#3b8afd;--blue-500:#0d6efd;--blue-600:#0b5ed7;--blue-700:#094db1;--blue-800:#073d8b;--blue-900:#052c65;--green-50:#f4f9f6;--green-100:#c8e2d6;--green-200:#9ccbb5;--green-300:#70b595;--green-400:#459e74;--green-500:#198754;--green-600:#157347;--green-700:#125f3b;--green-800:#0e4a2e;--green-900:#0a3622;--yellow-50:#fffcf3;--yellow-100:#fff0c3;--yellow-200:#ffe494;--yellow-300:#ffd965;--yellow-400:#ffcd36;--yellow-500:#ffc107;--yellow-600:#d9a406;--yellow-700:#b38705;--yellow-800:#8c6a04;--yellow-900:#664d03;--cyan-50:#f3fcfe;--cyan-100:#c5f2fb;--cyan-200:#97e8f9;--cyan-300:#69def6;--cyan-400:#3bd4f3;--cyan-500:#0dcaf0;--cyan-600:#0baccc;--cyan-700:#098da8;--cyan-800:#076f84;--cyan-900:#055160;--pink-50:#fdf5f9;--pink-100:#f5cee1;--pink-200:#eda7ca;--pink-300:#e681b3;--pink-400:#de5a9b;--pink-500:#d63384;--pink-600:#b62b70;--pink-700:#96245c;--pink-800:#761c49;--pink-900:#561435;--indigo-50:#f7f3fe;--indigo-100:#dac6fc;--indigo-200:#bd98f9;--indigo-300:#a06bf7;--indigo-400:#833df4;--indigo-500:#6610f2;--indigo-600:#570ece;--indigo-700:#470ba9;--indigo-800:#380985;--indigo-900:#290661;--teal-50:#f4fcfa;--teal-100:#c9f2e6;--teal-200:#9fe8d2;--teal-300:#75debf;--teal-400:#4ad3ab;--teal-500:#20c997;--teal-600:#1bab80;--teal-700:#168d6a;--teal-800:#126f53;--teal-900:#0d503c;--orange-50:#fff9f3;--orange-100:#ffe0c7;--orange-200:#fec89a;--orange-300:#feaf6d;--orange-400:#fd9741;--orange-500:#fd7e14;--orange-600:#d76b11;--orange-700:#b1580e;--orange-800:#8b450b;--orange-900:#653208;--bluegray-50:#f8f9fb;--bluegray-100:#e0e4ea;--bluegray-200:#c7ced9;--bluegray-300:#aeb9c8;--bluegray-400:#95a3b8;--bluegray-500:#7c8ea7;--bluegray-600:#69798e;--bluegray-700:#576375;--bluegray-800:#444e5c;--bluegray-900:#323943;--purple-50:#f8f6fc;--purple-100:#dcd2f0;--purple-200:#c1aee4;--purple-300:#a68ad9;--purple-400:#8a66cd;--purple-500:#6f42c1;--purple-600:#5e38a4;--purple-700:#4e2e87;--purple-800:#3d246a;--purple-900:#2c1a4d;--red-50:#fdf5f6;--red-100:#f7cfd2;--red-200:#f0a8af;--red-300:#e9828c;--red-400:#e35b68;--red-500:#dc3545;--red-600:#bb2d3b;--red-700:#9a2530;--red-800:#791d26;--red-900:#58151c;--primary-50:#f2f8ff;--primary-100:#c2dfff;--primary-200:#91c6ff;--primary-300:#61adff;--primary-400:#3094ff;--primary-500:#007bff;--primary-600:#0069d9;--primary-700:#0056b3;--primary-800:#00448c;--primary-900:#003166}</style><link rel=\"stylesheet\" href=\"styles.305394b8e80b506d.css\" media=\"print\" onload=\"this.media='all'\"><noscript><link rel=\"stylesheet\" href=\"styles.305394b8e80b506d.css\"></noscript></head>\n",
      "  <body id=\"top\">\n",
      "    <!-- Google Tag Manager (noscript) -->\n",
      "    <noscript>\n",
      "      <iframe src=\"https://www.googletagmanager.com/ns.html?id=GTM-WNP7MLF\" height=\"0\" width=\"0\" style=\"display:none;visibility:hidden\"></iframe>\n",
      "    </noscript>\n",
      "    <!-- End Google Tag Manager (noscript) -->\n",
      "    \n",
      "    <!-- App root route -->\n",
      "    <app-root></app-root>\n",
      "\n",
      "    <script>window.appDebug=true;</script>\n",
      "  \n",
      "    <!-- load external scripts -->\n",
      "    <script async=\"async\" defer=\"defer\" src=\"https://cdn.earthdata.nasa.gov/tophat2/tophat2.js\" id=\"earthdata-tophat-script\" data-current-daac=\"LP DAAC\"></script>\n",
      "  <script src=\"runtime.fb26fae061cf48f7.js\" type=\"module\"></script><script src=\"polyfills.19306772240d9b2b.js\" type=\"module\"></script><script src=\"scripts.210315fab5274d52.js\" defer></script><script src=\"main.7e1737435c1ca948.js\" type=\"module\"></script></body>\n",
      "</html>\n"
     ]
    }
   ],
   "source": [
    "# download the data\n",
    "response = requests.get(\n",
    "    f'https://appeears.earthdatacloud.nasa.gov/download/{task_id}',\n",
    "    headers={'Authorization': 'Bearer {0}'.format(token)}\n",
    ")\n",
    "print(response.content.decode('utf-8'))\n",
    "\n",
    "# with open('data.zip', 'wb') as f:\n",
    "#     f.write(response.content)\n",
    "\n",
    "# # unzip the data\n",
    "# import zipfile\n",
    "# with zipfile.ZipFile('data.zip', 'r') as zip_ref:\n",
    "#     zip_ref.extractall('data')"
   ]
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "Python 3",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.8.10"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 2
}
